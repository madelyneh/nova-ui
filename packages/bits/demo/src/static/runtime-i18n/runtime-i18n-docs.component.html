<div class="m-3 w-75">
    <p>
        This example shows how to achieve the runtime localization in Angular 9 using <code>$localize</code> and <code>localStorage</code>.
    </p>
    <p>
        Angular 9 comes with the new <b>@angular/localize</b> package which delivers a number of i18n features. The <b>$localize</b> global variable is one of them, and comes as
        a subsitution for the widely used <a href="https://github.com/ngx-translate/i18n-polyfill" target="_blank">ngx-translate/i18n-polyfill</a>. It's main purpose is to be used for the runtime translations.
        According to the <a href="https://blog.ninja-squad.com/2019/12/10/angular-localize/" target="_blank">article</a>, the <code>$localize</code> feature is still undocumented officially,
        but already does a great job.
    </p>

    <p>
        The example below was achieved by following the next steps:
    </p>
    <p>
        Run the <b>ng add @angular/localize</b> schematic. Verify that the <b>polyfill.ts</b> file was properly updated
    </p>
        <nui-example-code language="typescript">{{code.polyfillImport2}}</nui-example-code><br />
    <p>
        Modify your <b>polyfills.ts</b> file with necessary imports
    </p>
        <nui-example-code language="typescript">{{code.polyfillImport1}}</nui-example-code><br />
    <p>
        Prepare your translations. If you have .xlf files, you may want to convert them to .json format, which would consist of the translation IDs as keys, and corresponding trnaslations as values.
        This exactly what the <b>localTranslations</b> method accepts as a parameter. Load converted .json files into appropriate variables in the same place - <b>polyfills.ts</b> file.<br />
    </p>
    <p>
        For now you can use <a href="https://www.npmjs.com/package/@locl/cli" target="_blank">@locl/cli</a> for converting .xlf files to .json. The .json format is the most optimized in term of size and supported 
        by existing loaders for lazy loading translations. <br>
        <mark>NOTE: for the sake of example we have the translations already set to variables explicitly</mark>
    </p>
        <nui-example-code language="typescript">{{code.polyfillTranslations}}</nui-example-code><br />
    <p>
        In the same file add logic to handle runtime translations load. There is no official way how to do it, so feel free to implement it your way. In current example the
        <b>localStorage</b> was used. The algorithm is following:
    </p>
        <ol>
            <li>On the view let user select the desired language</li>
            <li>On selection, save the chosen locale to local storage</li>
            <li>Reload the page programmatically. This will restart the application and load polyfills.ts once again</li>
            <li>In polyfills.ts add logic that handles the data stored in local storage and loads the correct translations depending on that data</li>
        </ol>
        <nui-example-code language="typescript">{{code.handleTranslations}}</nui-example-code><br />

</div>
Go to <a href="/#/runtime-i18n" target="_blank">Runtime i18n Example</a>